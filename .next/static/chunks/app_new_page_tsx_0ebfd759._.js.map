{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/divya/OneDrive/Desktop/Developers/hackernews-frontend-final/app/new/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\n\r\ninterface Post {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function NewPostsPage() {\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const [page, setPage] = useState(1);\r\n  const [limit] = useState(5);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL;\r\n\r\n  const fetchPosts = useCallback(async (pageNum: number) => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\r\n        `${API_BASE}/posts/getAllposts?page=${pageNum}&limit=${limit}`,\r\n        { credentials: \"include\" }\r\n      );\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        console.error(\"Server error:\", res.status, errorText);\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      setPosts((prev) => {\r\n        const newPosts = data.data.filter((newPost: Post) => !prev.some((post: Post) => post.id === newPost.id));\r\n        return [...prev, ...newPosts];\r\n      });\r\n      setTotalPages(data.pagination.totalPages);\r\n    } catch (err) {\r\n      console.error(\"Fetch failed:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  },[limit,API_BASE]);\r\n\r\n  useEffect(() => {\r\n    fetchPosts(1);\r\n  }, [fetchPosts]);\r\n\r\n  const handleLoadMore = () => {\r\n    const nextPage = page + 1;\r\n    setPage(nextPage);\r\n    fetchPosts(nextPage);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-4 max-w-2xl mx-auto bg-[#f6f6ef] mt-15\">\r\n      <h1 className=\"text-[18px] font-bold mb-4 text-orange-600 text-center\">New Posts</h1>\r\n\r\n      <div className=\"space-y-4\">\r\n        {posts.map((post, index) => (\r\n          <div\r\n            key={post.id}\r\n            className=\"bg-white rounded-2xl shadow-md p-4 border-l-[4px] border-blue-200\"\r\n          >\r\n            <div className=\"flex items-center justify-between text-sm text-gray-500\">\r\n              <div>\r\n                <span className=\"font-bold text-gray-700\">{index + 1}.</span>{\" \"}\r\n                <span className=\"text-pink-600 font-medium hover:underline cursor-pointer\">\r\n                  {post.title}\r\n                </span>\r\n              </div>\r\n              <span className=\"text-xs\">\r\n                {new Date(post.createdAt).toLocaleTimeString()}\r\n              </span>\r\n            </div>\r\n            <p className=\"text-gray-700 text-[13px] mt-2\">{post.content}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {page < totalPages && (\r\n        <div className=\"mt-6 flex justify-center\">\r\n          <button\r\n            onClick={handleLoadMore}\r\n            className=\"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 disabled:opacity-50\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Loading...\" : \"More\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;AAiBmB;;AAfnB;;;AAFA;;AAWe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,MAAM,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM;IAEN,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;gDAAE,OAAO;YACpC,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,GAAG,SAAS,wBAAwB,EAAE,QAAQ,OAAO,EAAE,OAAO,EAC9D;oBAAE,aAAa;gBAAU;gBAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,MAAM,YAAY,MAAM,IAAI,IAAI;oBAChC,QAAQ,KAAK,CAAC,iBAAiB,IAAI,MAAM,EAAE;oBAC3C;gBACF;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B;4DAAS,CAAC;wBACR,MAAM,WAAW,KAAK,IAAI,CAAC,MAAM;6EAAC,CAAC,UAAkB,CAAC,KAAK,IAAI;qFAAC,CAAC,OAAe,KAAK,EAAE,KAAK,QAAQ,EAAE;;;wBACtG,OAAO;+BAAI;+BAAS;yBAAS;oBAC/B;;gBACA,cAAc,KAAK,UAAU,CAAC,UAAU;YAC1C,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,iBAAiB;YACjC,SAAU;gBACR,WAAW;YACb;QACF;+CAAE;QAAC;QAAM;KAAS;IAElB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,WAAW;QACb;iCAAG;QAAC;KAAW;IAEf,MAAM,iBAAiB;QACrB,MAAM,WAAW,OAAO;QACxB,QAAQ;QACR,WAAW;IACb;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAyD;;;;;;0BAEvE,6LAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAK,WAAU;;oDAA2B,QAAQ;oDAAE;;;;;;;4CAAS;0DAC9D,6LAAC;gDAAK,WAAU;0DACb,KAAK,KAAK;;;;;;;;;;;;kDAGf,6LAAC;wCAAK,WAAU;kDACb,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;;;;;;0CAGhD,6LAAC;gCAAE,WAAU;0CAAkC,KAAK,OAAO;;;;;;;uBAdtD,KAAK,EAAE;;;;;;;;;;YAmBjB,OAAO,4BACN,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,SAAS;oBACT,WAAU;oBACV,UAAU;8BAET,UAAU,eAAe;;;;;;;;;;;;;;;;;AAMtC;GAlFwB;KAAA","debugId":null}}]
}